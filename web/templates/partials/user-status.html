<!-- web/templates/partials/user-status.html -->
<div class="card user-status-card">
  <div class="user-header">
    <div class="avatar" style="background-color: #{{ '%06x' % (user.id % 0xFFFFFF) }};">
      {{ user.first_name[0].upper() }}
    </div>
    <div class="user-info">
      <h2 id="greeting">–ü—Ä–∏–≤–µ—Ç</h2>
      <p class="user-name">{{ user.first_name }} 
        {% if user.is_premium %}
          <img src="/static/premium.svg" alt="Premium" class="premium-badge">
        {% endif %}
      </p>
      <p class="user-id">ID: <code>{{ user.id }}</code></p>
    </div>
  </div>

  <div class="user-stats-grid">
    <div class="stat-item">
      <span class="stat-label">–†–µ—Ñ–µ—Ä–∞–ª—ã</span>
      <span class="stat-value">{{ user.referrals }}</span>
    </div>
    <div class="stat-item">
      <span class="stat-label">–ü–æ–¥–ø–∏—Å–∫–∞</span>
      <span class="stat-value">
        {% if user.is_premium %}
          <span class="status active">–ê–∫—Ç–∏–≤–Ω–∞</span>
        {% else %}
          <span class="status inactive">–ù–µ—Ç</span>
        {% endif %}
      </span>
    </div>
    <div class="stat-item">
      <span class="stat-label">–ë–∞–ª–∞–Ω—Å</span>
      <span class="stat-value">{{ "%.2f"|format(stats.balance) }} ‚ÇΩ</span>
    </div>
    <div class="stat-item">
      <span class="stat-label">–î–æ—Ö–æ–¥</span>
      <span class="stat-value">{{ "%.2f"|format(stats.income) }} ‚ÇΩ</span>
    </div>
  </div>
</div>

<script>
  // –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –ø–æ –≤—Ä–µ–º–µ–Ω–∏
  document.addEventListener('DOMContentLoaded', () => {
    const hour = new Date().getHours();
    const greeting = document.getElementById('greeting');
    const greetings = [
      { hour: 5, text: "–î–æ–±—Ä–æ–π –Ω–æ—á–∏", icon: "üò¥" },
      { hour: 6, text: "–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ", icon: "‚òÄÔ∏è" },
      { hour: 12, text: "–î–æ–±—Ä—ã–π –¥–µ–Ω—å", icon: "üå§" },
      { hour: 18, text: "–î–æ–±—Ä—ã–π –≤–µ—á–µ—Ä", icon: "üåô" },
      { hour: 22, text: "–î–æ–±—Ä–æ–π –Ω–æ—á–∏", icon: "üò¥" }
    ];
    const current = greetings.reverse().find(g => hour >= g.hour);
    if (greeting) {
      greeting.textContent = `${current.text}, ${{{ user.first_name }}}`;
      if (current.icon) {
        greeting.innerHTML += ` ${current.icon}`;
      }
    }
  });
</script>