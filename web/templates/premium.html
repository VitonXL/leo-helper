{% extends "base.html" %}

{% block title %}Лео — Подписка{% endblock %}

{% block styles %}
<style>
:root {
  --bg: transparent;
  --card-bg: rgba(255, 255, 255, 0.95);
  --text: #212121;
  --text-secondary: #757575;
  --border: rgba(178, 255, 89, 0.2);
  --accent: #4CAF50;
  --accent-light: #B2FF59;
  --gold: linear-gradient(-45deg, #DAA520, #FFD700, #F4C430, #C5B358, #DAA520);
  --gold-soft: linear-gradient(-45deg, #D4A017, #E6C229, #F4C430, #D4A017);
  --radius-sm: 8px;
  --radius-md: 16px;
  --radius-lg: 24px;
  --shadow: 0 6px 20px rgba(76, 175, 80, 0.08);
  --shadow-hover: 0 12px 28px rgba(76, 175, 80, 0.16), 0 16px 40px rgba(0, 0, 0, 0.12);
  --transition: 0.3s cubic-bezier(0.16, 1, 0.3, 1);
}

[data-theme="dark"] {
  --bg: transparent;
  --card-bg: rgba(30, 30, 30, 0.95);
  --text: #ffffff;
  --text-secondary: #b0b0b0;
  --border: rgba(178, 255, 89, 0.1);
}

body, html {
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
  font-family: 'Inter', sans-serif;
  color: var(--text);
  background: linear-gradient(135deg, #f0fff0, #d9f7d9, #e6ffeb);
  background-size: 400% 400%;
  animation: gradient-shift 15s ease infinite;
  min-height: 100vh;
  overflow-x: hidden;
}

[data-theme="dark"] body {
  background: linear-gradient(135deg, #0a1e0a, #0c240c, #0d2a0d);
}

@keyframes gradient-shift {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

.container {
  max-width: 1000px;
  margin: 0 auto;
  padding: 20px;
}

/* === ПЛАНЫ ПОДПИСКИ === */
.plans-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  gap: 20px;
  margin: 30px 0;
}

.plan-card {
  background: var(--card-bg);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  padding: 24px;
  text-align: center;
  cursor: pointer;
  transition: all 0.3s;
  position: relative;
  box-shadow: var(--shadow);
}

.plan-card:hover {
  transform: translateY(-3px);
  box-shadow: var(--shadow-hover);
}

.plan-card h3 {
  margin: 0 0 8px 0;
  color: var(--accent);
  font-size: 18px;
}

.plan-card .highlight {
  background: rgba(218, 165, 32, 0.08);
  border: 1px solid rgba(218, 165, 32, 0.2);
  position: relative;
}

.plan-card .highlight::before {
  content: '⭐';
  position: absolute;
  top: -12px;
  right: -12px;
  background: var(--gold);
  width: 48px;
  height: 48px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 16px;
  color: white;
  box-shadow: 0 4px 12px rgba(218, 165, 32, 0.3);
  animation: shimmer-gold-strong 6s ease-in-out infinite;
}

@keyframes shimmer-gold-strong {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

.plan-card .price {
  font-size: 24px;
  font-weight: 700;
  color: var(--text);
  margin: 12px 0;
}

.plan-card ul {
  text-align: left;
  margin: 16px 0;
  padding: 0 20px 0 20px;
  list-style: none;
}

.plan-card li {
  margin: 6px 0;
  color: var(--text-secondary);
  font-size: 14px;
}

.plan-card li::before {
  content: '✅';
  margin-right: 6px;
  font-size: 12px;
}

.plan-card li:nth-child(3)::before {
  content: '❌';
}

/* === ПОДВАЛ === */
footer {
  text-align: center;
  color: var(--text-secondary);
  font-size: 14px;
  margin-top: 40px;
}
</style>
{{ super() }}
{% endblock %}

{% block content %}
  {% include "components/header.html" %}

<script>
  document.addEventListener('DOMContentLoaded', () => {
    setPageTitle("Подписка");
  });
</script>

  <div class="container">
    <div style="text-align: center; color: var(--text-secondary); font-size: 16px; margin-bottom: 30px;">
      <p>Выберите тариф и получите доступ к расширенным функциям</p>
    </div>

    <div class="plans-grid">
      <!-- Стандарт -->
      <div class="plan-card" onclick="pay(30, 150)">
        <h3>Стандарт</h3>
        <div class="price">150 ₽</div>
        <ul>
          <li>Базовый функционал</li>
          <li>Приоритетная поддержка</li>
          <li>Расширенные функции</li>
        </ul>
      </div>

      <!-- Продвинутый -->
      <div class="plan-card highlight" onclick="pay(90, 390)">
        <h3>Продвинутый</h3>
        <div class="price">390 ₽</div>
        <ul>
          <li>Все функции "Стандарт"</li>
          <li>Расширенные инструменты</li>
          <li>Экспорт данных</li>
        </ul>
      </div>

      <!-- Максимум -->
      <div class="plan-card" onclick="pay(365, 1100)">
        <h3>Максимум</h3>
        <div class="price">1100 ₽</div>
        <ul>
          <li>Все функции "Продвинутый"</li>
          <li>Приоритетные обновления</li>
          <li>Персональный менеджер</li>
        </ul>
      </div>
    </div>

    <footer>
      <p>Оплата через FreeKassa • Безопасно и быстро</p>
    </footer>
  </div>
{% endblock %}

{% block scripts %}
  {{ super() }}
  <script>
    function pay(days, amount) {
      const user_id = {{ user.id }};
      const plan = `premium_${days}`;
      const merchant_id = "{{ merchant_id }}";
      const url = `https://www.free-kassa.ru/merchant/cash.php?m=${merchant_id}&s=${amount}&i=${days}&us_user_id=${user_id}&us_plan=${plan}&shp_bot=leo_aide`;
      window.open(url, '_blank');
    }
  </script>
{% endblock %}